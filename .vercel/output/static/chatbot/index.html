<!DOCTYPE html><!-- Overlay Backdrop --><link rel="stylesheet" href="/_astro/about.2XHW7-kN.css">
<style>@import"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap";body{font-family:Inter,sans-serif}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes typing{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}@keyframes slideIn{0%{transform:translate(100%)}to{transform:translate(0)}}.animate-fadeIn[data-astro-cid-cpe23hkd]{animation:fadeIn .3s ease-out forwards}.typing-indicator[data-astro-cid-cpe23hkd] div[data-astro-cid-cpe23hkd]{animation:typing 1s infinite ease-in-out}.typing-indicator[data-astro-cid-cpe23hkd] div[data-astro-cid-cpe23hkd]:nth-child(2){animation-delay:.2s}.typing-indicator[data-astro-cid-cpe23hkd] div[data-astro-cid-cpe23hkd]:nth-child(3){animation-delay:.4s}.chat-scrollbar[data-astro-cid-cpe23hkd]{scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.2) rgba(0,0,0,.05)}.chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar{width:6px}.chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-track{background:#0000000d;border-radius:10px}.chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-thumb{background:#0003;border-radius:10px}.chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-thumb:hover{background:#0000004d}.dark[data-astro-cid-cpe23hkd] .chat-scrollbar[data-astro-cid-cpe23hkd]{scrollbar-color:rgba(255,255,255,.2) rgba(255,255,255,.05)}.dark[data-astro-cid-cpe23hkd] .chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-track{background:#ffffff0d}.dark[data-astro-cid-cpe23hkd] .chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-thumb{background:#fff3}.dark[data-astro-cid-cpe23hkd] .chat-scrollbar[data-astro-cid-cpe23hkd]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.chat-overlay[data-astro-cid-cpe23hkd]{backdrop-filter:blur(2px);transition:opacity .3s ease;opacity:0}.chat-overlay[data-astro-cid-cpe23hkd].show{opacity:1}.sidebar-slide[data-astro-cid-cpe23hkd]{transition:transform .3s cubic-bezier(.4,0,.2,1)}.mascot-container[data-astro-cid-cpe23hkd]{will-change:transform}
</style><div id="chat-overlay" class="chat-overlay hidden fixed inset-0 bg-black/30 z-[9998]" data-astro-cid-cpe23hkd></div> <!-- Chatbot Widget with Maskot --> <div class="fixed bottom-6 right-6 z-[9999]" data-astro-cid-cpe23hkd> <!-- Speech Bubble --> <div id="mascot-bubble" class="absolute bottom-full right-16 mb-2 opacity-0 pointer-events-none" style="animation: fadeIn 0.5s ease 0.5s forwards;" data-astro-cid-cpe23hkd> <div class="bg-white dark:bg-gray-800 rounded-2xl rounded-br-sm px-4 py-2 shadow-2xl border-2 border-blue-200 dark:border-green-600" data-astro-cid-cpe23hkd> <p id="mascot-text" class="text-xs text-gray-700 dark:text-gray-200 font-medium whitespace-nowrap" data-astro-cid-cpe23hkd></p> <div id="mascot-typing" class="flex space-x-1" data-astro-cid-cpe23hkd> <div class="w-1.5 h-1.5 bg-blue-500 dark:bg-green-500 rounded-full animate-bounce" data-astro-cid-cpe23hkd></div> <div class="w-1.5 h-1.5 bg-blue-500 dark:bg-green-500 rounded-full animate-bounce" style="animation-delay: 0.15s;" data-astro-cid-cpe23hkd></div> <div class="w-1.5 h-1.5 bg-blue-500 dark:bg-green-500 rounded-full animate-bounce" style="animation-delay: 0.3s;" data-astro-cid-cpe23hkd></div> </div> </div> <div class="absolute bottom-1 right-0 w-0 h-0 border-t-6 border-t-transparent border-b-6 border-b-transparent border-l-6 border-l-white dark:border-l-gray-800 transform translate-x-full" data-astro-cid-cpe23hkd></div> </div> <!-- Maskot and Button Container --> <div class="relative flex items-end gap-1" data-astro-cid-cpe23hkd> <div class="mascot-container relative flex items-end justify-center" style="width: 120px; height: 120px;" data-astro-cid-cpe23hkd> <img src="/_astro/maskot_genion.mgd7PCLn_ZajaDE.avif" alt="Genion Maskot" loading="lazy" style="animation-duration: 2s;" id="mascot-img" data-astro-cid-cpe23hkd="true" decoding="async" fetchpriority="auto" width="120" height="120" class="w-full h-full object-contain object-bottom drop-shadow-2xl transition-transform duration-500 hover:scale-105 animate-bounce cursor-pointer"> <div class="absolute -right-1 top-1/3 text-xl animate-bounce pointer-events-none" style="animation-duration: 1s;" data-astro-cid-cpe23hkd>
ðŸ‘‰
</div> </div> <!-- Toggle Button --> <button id="chatbot-toggle" class="w-14 h-14 flex items-center justify-center 
              bg-gradient-to-r from-blue-400 to-blue-600 dark:from-green-500 dark:to-green-700 text-white rounded-full shadow-2xl border-2 border-white/50 dark:border-gray-700/50 
              transition-all duration-300 hover:scale-110 hover:shadow-xl hover:rotate-12 relative mb-1
              animate-pulse" style="animation-duration: 2s;" aria-label="Open chat" data-astro-cid-cpe23hkd> <span class="text-2xl" role="img" aria-label="chat" data-astro-cid-cpe23hkd>ðŸ’¬</span> <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white dark:border-gray-900 animate-ping" data-astro-cid-cpe23hkd></span> <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white dark:border-gray-900 flex items-center justify-center text-[10px] text-white font-bold" data-astro-cid-cpe23hkd>!</span> </button> </div> </div> <!-- Chatbot Sidebar --> <div id="chatbot-popup" class="hidden fixed top-0 right-0 z-[9999] w-full sm:w-96 h-full bg-white dark:bg-gray-900 shadow-2xl border-l border-gray-200 dark:border-gray-700 sidebar-slide translate-x-full flex flex-col" data-astro-cid-cpe23hkd> <!-- Header --> <div class="bg-gradient-to-r from-blue-400 to-blue-600 dark:from-green-500 dark:to-green-700 p-5 flex items-center justify-between" data-astro-cid-cpe23hkd> <div class="flex items-center space-x-3" data-astro-cid-cpe23hkd> <div class="w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center" data-astro-cid-cpe23hkd> <span class="text-white text-xl" role="img" aria-label="chat" data-astro-cid-cpe23hkd>ðŸ’¬</span> </div> <div data-astro-cid-cpe23hkd> <div class="text-white font-semibold text-lg" data-astro-cid-cpe23hkd>Genion Assistant</div> <div class="flex items-center gap-1 text-white/90 text-xs" data-astro-cid-cpe23hkd> <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse" data-astro-cid-cpe23hkd></span>
Online - Siap membantu
</div> </div> </div> <button id="chatbot-close" class="text-white/80 hover:text-white transition-colors text-2xl w-8 h-8 flex items-center justify-center hover:bg-white/10 rounded-lg" aria-label="Close chat" data-astro-cid-cpe23hkd>âœ–</button> </div> <!-- Messages Area --> <div id="chatbot-messages" class="flex-1 p-5 overflow-y-auto chat-scrollbar space-y-4 bg-gray-50 dark:bg-gray-900" data-astro-cid-cpe23hkd> <div class="animate-fadeIn" data-astro-cid-cpe23hkd> <div class="flex items-start space-x-2" data-astro-cid-cpe23hkd> <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0" data-astro-cid-cpe23hkd> <span class="text-white text-xs" role="img" aria-label="bot" data-astro-cid-cpe23hkd>ðŸ¤–</span> </div> <div class="bg-white dark:bg-gray-800 rounded-2xl rounded-tl-sm p-4 shadow-sm max-w-[85%]" data-astro-cid-cpe23hkd> <p class="text-gray-700 dark:text-gray-200 text-sm" data-astro-cid-cpe23hkd>Hai! Saya adalah <b data-astro-cid-cpe23hkd>Genion Assistant</b>, siap membantu Anda dalam pertanyaan <b data-astro-cid-cpe23hkd>apapun</b> seputar Genion! ðŸš€</p> </div> </div> <time class="text-xs text-gray-400 mt-1 ml-10 block" data-astro-cid-cpe23hkd>Baru saja</time> </div> </div> <!-- Input Area --> <div class="p-5 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700" data-astro-cid-cpe23hkd> <form id="chat-form" class="flex gap-2" data-astro-cid-cpe23hkd> <input id="chatbot-input" type="text" placeholder="Ketik pesan Anda..." autocomplete="off" class="flex-1 bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 text-sm text-gray-800 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-green-500 focus:border-transparent transition-all" aria-label="Message input" data-astro-cid-cpe23hkd> <button type="submit" id="chatbot-send" class="bg-gradient-to-r from-blue-400 to-blue-600 dark:from-green-500 dark:to-green-700 text-white px-5 rounded-xl hover:from-blue-500 hover:to-blue-700 dark:hover:from-green-600 dark:hover:to-green-800 transition-all duration-300 flex items-center justify-center shadow-sm hover:shadow-md" aria-label="Send message" data-astro-cid-cpe23hkd> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-astro-cid-cpe23hkd> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" data-astro-cid-cpe23hkd></path> </svg> </button> </form> </div> </div> <script lang="ts">
(function() {
    'use strict';
    
    // Cache DOM elements
    const elements = {
        popup: document.getElementById("chatbot-popup"),
        input: document.getElementById("chatbot-input"),
        messages: document.getElementById("chatbot-messages"),
        toggle: document.getElementById("chatbot-toggle"),
        close: document.getElementById("chatbot-close"),
        form: document.getElementById("chat-form"),
        mascotText: document.getElementById("mascot-text"),
        mascotTyping: document.getElementById("mascot-typing"),
        mascotImg: document.getElementById("mascot-img"),
        overlay: document.getElementById("chat-overlay")
    };

    // Constants
    const MESSAGES = [
        "Halo! Aku Genisten, Genion Asisten! ðŸ˜Š",
        "Ada yang bisa saya bantu? ðŸ’¬",
        "Yuk chat dengan saya! ðŸš€"
    ];
    const TYPING_SPEED = 50;
    const MESSAGE_DISPLAY_TIME = 4000;
    const TYPING_DELAY = 1500;

    let currentMessageIndex = 0;
    let isTyping = false;

    // Optimized typing animation
    function typeMessage(text, callback) {
        if (!elements.mascotText || !elements.mascotTyping || isTyping) return;
        
        isTyping = true;
        elements.mascotTyping.classList.remove("hidden");
        elements.mascotText.textContent = "";
        
        setTimeout(() => {
            elements.mascotTyping.classList.add("hidden");
            let i = 0;
            const typingInterval = setInterval(() => {
                if (i < text.length) {
                    elements.mascotText.textContent += text[i];
                    i++;
                } else {
                    clearInterval(typingInterval);
                    isTyping = false;
                    if (callback) callback();
                }
            }, TYPING_SPEED);
        }, TYPING_DELAY);
    }

    function cycleMascotMessages() {
        typeMessage(MESSAGES[currentMessageIndex], () => {
            setTimeout(() => {
                currentMessageIndex = (currentMessageIndex + 1) % MESSAGES.length;
                cycleMascotMessages();
            }, MESSAGE_DISPLAY_TIME);
        });
    }

    // Start animation after DOM ready
    setTimeout(cycleMascotMessages, 1000);

    // Sidebar controls
    function openSidebar() {
        if (!elements.popup.classList.contains("hidden")) return;
        
        elements.popup.classList.remove("hidden");
        elements.overlay.classList.remove("hidden");
        
        requestAnimationFrame(() => {
            elements.popup.classList.remove("translate-x-full");
            elements.popup.classList.add("translate-x-0");
            elements.overlay.classList.add("show");
            
            setTimeout(() => elements.input.focus(), 300);
        });
    }

    function closeSidebar() {
        elements.popup.classList.remove("translate-x-0");
        elements.popup.classList.add("translate-x-full");
        elements.overlay.classList.remove("show");
        
        setTimeout(() => {
            elements.popup.classList.add("hidden");
            elements.overlay.classList.add("hidden");
        }, 300);
    }

    // Time helper
    const getCurrentTime = () => {
        const now = new Date();
        return `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
    };

    // Message creation helpers
    function createMessageElement(content, isUser = false) {
        const div = document.createElement("div");
        div.className = "animate-fadeIn";
        
        const currentTime = getCurrentTime();
        const alignment = isUser ? "justify-end" : "";
        const bgClass = isUser 
            ? "bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-tr-sm" 
            : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-tl-sm";
        const avatar = isUser 
            ? '<div class="w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-gray-600 dark:text-gray-400 text-xs" role="img" aria-label="user">ðŸ‘¤</span></div>'
            : '<div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0"><span class="text-white text-xs" role="img" aria-label="bot">ðŸ¤–</span></div>';
        const order = isUser ? "flex-row-reverse" : "";
        const timeAlign = isUser ? "text-right mr-10" : "ml-10";
        
        div.innerHTML = `
            <div class="flex items-start space-x-2 ${alignment} ${order}">
                ${avatar}
                <div class="${bgClass} rounded-2xl px-4 py-2 max-w-[85%] shadow-sm">
                    ${content}
                </div>
            </div>
            <time class="text-xs text-gray-400 mt-1 ${timeAlign} block">${currentTime}</time>
        `;
        
        return div;
    }

    function createTypingIndicator() {
        const div = document.createElement("div");
        div.className = "flex items-start space-x-2 typing-message animate-fadeIn";
        div.innerHTML = `
            <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                <span class="text-white text-xs" role="img" aria-label="bot">ðŸ¤–</span>
            </div>
            <div class="bg-gray-200 dark:bg-gray-800 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm">
                <div class="flex space-x-1 typing-indicator">
                    <div class="w-2 h-2 bg-gray-500 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-500 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-500 rounded-full"></div>
                </div>
            </div>
        `;
        return div;
    }

    // Format message content
    function formatMessage(text) {
        text = text.trim();
        
        if (/^[-*â€¢]/m.test(text)) {
            const lines = text.split(/\n+/).map(line => line.trim()).filter(Boolean);
            const items = lines.map(line => 
                `<li>${line.replace(/^[-*â€¢]\s*/, "")}</li>`
            ).join("");
            return `<ul class='list-disc pl-5 space-y-1 text-sm'>${items}</ul>`;
        }
        
        return text.split(/\n+/).filter(Boolean)
            .map(p => `<p class="text-sm mb-2">${p}</p>`)
            .join("");
    }

    // Auto-scroll to bottom
    function scrollToBottom() {
        requestAnimationFrame(() => {
            elements.messages.scrollTop = elements.messages.scrollHeight;
        });
    }

    // Send message handler
    async function sendMessage(msg) {
        if (!msg || !elements.messages) return;
        
        // Add user message
        const userMsg = createMessageElement(`<p class="text-sm">${msg}</p>`, true);
        elements.messages.appendChild(userMsg);
        scrollToBottom();
        
        // Add typing indicator
        const typingIndicator = createTypingIndicator();
        elements.messages.appendChild(typingIndicator);
        scrollToBottom();
        
        try {
            const response = await fetch("/api/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: msg })
            });
            
            const data = await response.json();
            
            // Remove typing indicator
            typingIndicator.remove();
            
            // Add bot response
            const formattedReply = formatMessage(data.reply);
            const botMsg = createMessageElement(formattedReply, false);
            elements.messages.appendChild(botMsg);
            scrollToBottom();
            
        } catch (error) {
            console.error("Chat error:", error);
            typingIndicator.remove();
            
            const errorMsg = createMessageElement(
                '<p class="text-red-800 dark:text-red-200 text-sm">Gagal terhubung ke server. Silakan coba lagi.</p>',
                false
            );
            errorMsg.querySelector('.bg-gradient-to-br').className = 'w-8 h-8 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0';
            errorMsg.querySelector('.bg-white').className = 'bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-2xl px-4 py-2 max-w-[85%] shadow-sm';
            elements.messages.appendChild(errorMsg);
            scrollToBottom();
        }
    }

    // Event listeners
    elements.toggle?.addEventListener("click", openSidebar);
    elements.close?.addEventListener("click", closeSidebar);
    elements.overlay?.addEventListener("click", closeSidebar);
    elements.mascotImg?.addEventListener("click", openSidebar);
    
    elements.form?.addEventListener("submit", (e) => {
        e.preventDefault();
        const msg = elements.input.value.trim();
        if (msg) {
            elements.input.value = "";
            sendMessage(msg);
        }
    });

    // Keyboard shortcuts
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !elements.popup.classList.contains("hidden")) {
            closeSidebar();
        }
    });
})();
</script>